{"ast":null,"code":"import{Container,Stack,Box,Typography}from\"@mui/material\";import axios from\"axios\";import{useEffect,useState}from\"react\";import{useSearchParams}from\"react-router-dom\";import HospitalCard from\"../components/HospitalCard/HospitalCard\";import icon from\"../assets/tick.png\";import cta from\"../assets/cta.png\";import SearchHospital from\"../components/SearchHospital/SearchHospital\";import BookingModal from\"../components/BookingModal/BookingModal\";import AutohideSnackbar from\"../components/AutohideSnackbar/AutohideSnackbar\";import NavBar from\"../components/NavBar/NavBar\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";export default function Search(){const[seachParams,setSearchParams]=useSearchParams();const[hospitals,setHospitals]=useState([]);const[state,setState]=useState(seachParams.get(\"state\"));const[city,setCity]=useState(seachParams.get(\"city\"));const availableSlots={morning:[\"11:30 AM\"],afternoon:[\"12:00 PM\",\"12:30 PM\",\"01:30 PM\",\"02:00 PM\",\"02:30 PM\"],evening:[\"06:00 PM\",\"06:30 PM\",\"07:00 PM\",\"07:30 PM\"]};const[isModalOpen,setIsModalOpen]=useState(false);const[bookingDetails,setBookingDetails]=useState({});const[showBookingSuccess,setShowBookingSuccess]=useState(false);const[isLoading,setIsLoading]=useState(false);//API to fetch hospitals based on state and city selection \nuseEffect(()=>{const getHospitals=async()=>{setHospitals([]);setIsLoading(true);try{const data=await axios.get(\"https://meddata-backend.onrender.com/data?state=\".concat(state,\"&city=\").concat(city));setHospitals(data.data);setIsLoading(false);}catch(err){console.log(err);setIsLoading(false);}};if(state&&city){getHospitals();}},[state,city]);useEffect(()=>{setState(seachParams.get(\"state\"));setCity(seachParams.get(\"city\"));},[seachParams]);// show booking modal\nconst handleBookingModal=details=>{setBookingDetails(details);setIsModalOpen(true);};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(NavBar,{}),/*#__PURE__*/_jsxs(Box,{sx:{background:\"linear-gradient(#EFF5FE, rgba(241,247,255,0.47))\",width:\"100%\",pl:0},children:[/*#__PURE__*/_jsx(Box,{sx:{position:\"relative\",background:\"linear-gradient(90deg, #2AA7FF, #0C8CE5)\",borderBottomLeftRadius:\"1rem\",borderBottomRightRadius:\"1rem\"},children:/*#__PURE__*/_jsx(Container,{maxWidth:\"xl\",sx:{background:\"#fff\",p:3,borderRadius:2,transform:\"translatey(50px)\",mb:\"50px\",boxShadow:\"0 0 10px rgba(0,0,0,0.1)\"},children:/*#__PURE__*/_jsx(SearchHospital,{})})}),/*#__PURE__*/_jsxs(Container,{maxWidth:\"xl\",sx:{pt:8,pb:10,px:{xs:0,md:4}},children:[hospitals.length>0&&/*#__PURE__*/_jsxs(Box,{sx:{mb:3},children:[/*#__PURE__*/_jsxs(Typography,{component:\"h1\",fontSize:24,lineHeight:1.1,mb:2,fontWeight:500,children:[\"\".concat(hospitals.length,\" medical centers available in \"),/*#__PURE__*/_jsx(\"span\",{style:{textTransform:\"capitalize\"},children:city.toLocaleLowerCase()})]}),/*#__PURE__*/_jsxs(Stack,{direction:\"row\",spacing:2,children:[/*#__PURE__*/_jsx(\"img\",{src:icon,height:24,width:24,alt:\"icon\"}),/*#__PURE__*/_jsx(Typography,{color:\"#787887\",lineHeight:1.4,children:\"Book appointments with minimum wait-time & verified doctor details\"})]})]}),/*#__PURE__*/_jsxs(Stack,{alignItems:\"flex-start\",direction:{md:\"row\"},children:[/*#__PURE__*/_jsxs(Stack,{mb:{xs:4,md:0},spacing:3,width:{xs:1,md:\"calc(100% - 384px)\"},mr:\"24px\",children:[hospitals.length>0&&hospitals.map(hospital=>/*#__PURE__*/_jsx(HospitalCard,{details:hospital,availableSlots:availableSlots,handleBooking:handleBookingModal},hospital[\"Hospital Name\"])),isLoading&&/*#__PURE__*/_jsx(Typography,{variant:\"h3\",bgcolor:\"#fff\",p:3,borderRadius:2,children:\"Loading...\"}),!state&&/*#__PURE__*/_jsx(Typography,{variant:\"h3\",bgcolor:\"#fff\",p:3,borderRadius:2,children:\"Please select a state and city\"})]}),/*#__PURE__*/_jsx(\"img\",{src:cta,width:360,height:\"auto\",alt:\"banner\"})]})]}),/*#__PURE__*/_jsx(BookingModal,{open:isModalOpen,setOpen:setIsModalOpen,bookingDetails:bookingDetails,showSuccessMessage:setShowBookingSuccess}),/*#__PURE__*/_jsx(AutohideSnackbar,{open:showBookingSuccess,setOpen:setShowBookingSuccess,message:\"Booking Successful\"})]})]});}","map":{"version":3,"names":["Container","Stack","Box","Typography","axios","useEffect","useState","useSearchParams","HospitalCard","icon","cta","SearchHospital","BookingModal","AutohideSnackbar","NavBar","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Search","seachParams","setSearchParams","hospitals","setHospitals","state","setState","get","city","setCity","availableSlots","morning","afternoon","evening","isModalOpen","setIsModalOpen","bookingDetails","setBookingDetails","showBookingSuccess","setShowBookingSuccess","isLoading","setIsLoading","getHospitals","data","concat","err","console","log","handleBookingModal","details","children","sx","background","width","pl","position","borderBottomLeftRadius","borderBottomRightRadius","maxWidth","p","borderRadius","transform","mb","boxShadow","pt","pb","px","xs","md","length","component","fontSize","lineHeight","fontWeight","style","textTransform","toLocaleLowerCase","direction","spacing","src","height","alt","color","alignItems","mr","map","hospital","handleBooking","variant","bgcolor","open","setOpen","showSuccessMessage","message"],"sources":["C:/Users/91994/Downloads/f05a3cb6-e821-46db-b5ce-855feda8867e/src/Search/Search.jsx"],"sourcesContent":["import { Container, Stack, Box, Typography } from \"@mui/material\";\r\nimport axios from \"axios\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { useSearchParams } from \"react-router-dom\";\r\nimport HospitalCard from \"../components/HospitalCard/HospitalCard\";\r\nimport icon from \"../assets/tick.png\";\r\nimport cta from \"../assets/cta.png\";\r\nimport SearchHospital from \"../components/SearchHospital/SearchHospital\";\r\nimport BookingModal from \"../components/BookingModal/BookingModal\";\r\nimport AutohideSnackbar from \"../components/AutohideSnackbar/AutohideSnackbar\";\r\nimport NavBar from \"../components/NavBar/NavBar\";\r\n\r\nexport default function Search() {\r\n  const [seachParams, setSearchParams] = useSearchParams();\r\n  const [hospitals, setHospitals] = useState([]);\r\n  const [state, setState] = useState(seachParams.get(\"state\"));\r\n  const [city, setCity] = useState(seachParams.get(\"city\"));\r\n  const availableSlots = {\r\n    morning: [\"11:30 AM\"],\r\n    afternoon: [\"12:00 PM\", \"12:30 PM\", \"01:30 PM\", \"02:00 PM\", \"02:30 PM\"],\r\n    evening: [\"06:00 PM\", \"06:30 PM\", \"07:00 PM\", \"07:30 PM\"],\r\n  };\r\n  const [isModalOpen, setIsModalOpen] = useState(false);\r\n  const [bookingDetails, setBookingDetails] = useState({});\r\n  const [showBookingSuccess, setShowBookingSuccess] = useState(false);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n\r\n  //API to fetch hospitals based on state and city selection \r\n  useEffect(() => {\r\n    const getHospitals = async () => {\r\n      setHospitals([]);\r\n      setIsLoading(true);\r\n      try {\r\n        const data = await axios.get(\r\n          `https://meddata-backend.onrender.com/data?state=${state}&city=${city}`\r\n        );\r\n        setHospitals(data.data);\r\n        setIsLoading(false);\r\n      } catch (err) {\r\n        console.log(err);\r\n        setIsLoading(false);\r\n      }\r\n    };\r\n\r\n    if (state && city) {\r\n      getHospitals();\r\n    }\r\n  }, [state, city]);\r\n\r\n  useEffect(() => {\r\n    setState(seachParams.get(\"state\"));\r\n    setCity(seachParams.get(\"city\"));\r\n  }, [seachParams]);\r\n\r\n  // show booking modal\r\n  const handleBookingModal = (details) => {\r\n    setBookingDetails(details);\r\n    setIsModalOpen(true);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <NavBar />\r\n      <Box\r\n        sx={{\r\n          background: \"linear-gradient(#EFF5FE, rgba(241,247,255,0.47))\",\r\n          width: \"100%\",\r\n          pl: 0,\r\n        }}\r\n      >\r\n        <Box\r\n          sx={{\r\n            position: \"relative\",\r\n            background: \"linear-gradient(90deg, #2AA7FF, #0C8CE5)\",\r\n            borderBottomLeftRadius: \"1rem\",\r\n            borderBottomRightRadius: \"1rem\",\r\n          }}\r\n        >\r\n          <Container\r\n            maxWidth=\"xl\"\r\n            sx={{\r\n              background: \"#fff\",\r\n              p: 3,\r\n              borderRadius: 2,\r\n              transform: \"translatey(50px)\",\r\n              mb: \"50px\",\r\n              boxShadow: \"0 0 10px rgba(0,0,0,0.1)\",\r\n            }}\r\n          >\r\n            <SearchHospital />\r\n          </Container>\r\n        </Box>\r\n\r\n        <Container maxWidth=\"xl\" sx={{ pt: 8, pb: 10, px: { xs: 0, md: 4 } }}>\r\n          {hospitals.length > 0 && (\r\n            <Box sx={{ mb: 3 }}>\r\n              <Typography\r\n                component=\"h1\"\r\n                fontSize={24}\r\n                lineHeight={1.1}\r\n                mb={2}\r\n                fontWeight={500}\r\n              >\r\n                {`${hospitals.length} medical centers available in `}\r\n                <span style={{ textTransform: \"capitalize\" }}>\r\n                  {city.toLocaleLowerCase()}\r\n                </span>\r\n              </Typography>\r\n              <Stack direction=\"row\" spacing={2}>\r\n                <img src={icon} height={24} width={24} alt=\"icon\" />\r\n                <Typography color=\"#787887\" lineHeight={1.4}>\r\n                  Book appointments with minimum wait-time & verified doctor\r\n                  details\r\n                </Typography>\r\n              </Stack>\r\n            </Box>\r\n          )}\r\n\r\n          <Stack alignItems=\"flex-start\" direction={{ md: \"row\" }}>\r\n            <Stack\r\n              mb={{ xs: 4, md: 0 }}\r\n              spacing={3}\r\n              width={{ xs: 1, md: \"calc(100% - 384px)\" }}\r\n              mr=\"24px\"\r\n            >\r\n              {hospitals.length > 0 &&\r\n                hospitals.map((hospital) => (\r\n                  <HospitalCard\r\n                    key={hospital[\"Hospital Name\"]}\r\n                    details={hospital}\r\n                    availableSlots={availableSlots}\r\n                    handleBooking={handleBookingModal}\r\n                  />\r\n                ))}\r\n\r\n              {isLoading && (\r\n                <Typography variant=\"h3\" bgcolor=\"#fff\" p={3} borderRadius={2}>\r\n                  Loading...\r\n                </Typography>\r\n              )}\r\n\r\n              {!state && (\r\n                <Typography variant=\"h3\" bgcolor=\"#fff\" p={3} borderRadius={2}>\r\n                  Please select a state and city\r\n                </Typography>\r\n              )}\r\n            </Stack>\r\n\r\n            <img src={cta} width={360} height=\"auto\" alt=\"banner\" />\r\n          </Stack>\r\n        </Container>\r\n\r\n        <BookingModal\r\n          open={isModalOpen}\r\n          setOpen={setIsModalOpen}\r\n          bookingDetails={bookingDetails}\r\n          showSuccessMessage={setShowBookingSuccess}\r\n        />\r\n\r\n        <AutohideSnackbar\r\n          open={showBookingSuccess}\r\n          setOpen={setShowBookingSuccess}\r\n          message=\"Booking Successful\"\r\n        />\r\n      </Box>\r\n    </>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}